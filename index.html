<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <!-- é€‚é…æµè§ˆå™¨ä¸»é¢˜é¢œè‰²ï¼Œæå‡åœ°å€æ /æ ‡ç­¾æ ä¸€è‡´æ€§ -->
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0b0f19" media="(prefers-color-scheme: dark)">
    <!-- Apple Touch Icon ä¿ç•™ä¸ºä½ çš„ logoï¼ˆä¸å½±å“æ¡Œé¢æµè§ˆå™¨ favicon é€‰æ‹©ï¼‰ -->
    <link rel="apple-touch-icon" href="/src/assets/logo-xiaole.png" />
    <!-- ä¸»é¢˜è‡ªé€‚é…ï¼šä»…ä½¿ç”¨åª’ä½“æŸ¥è¯¢ï¼Œé¿å…å›é€€è¦†ç›–é€‰æ‹©ï¼›å…ˆæ”¾æ·±è‰²ï¼Œå†æ”¾æµ…è‰² -->
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-dark.png" media="(prefers-color-scheme: dark)" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-dark.png" media="(prefers-color-scheme: dark)" />
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-dark.png" media="(prefers-color-scheme: dark)" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-light.png" media="(prefers-color-scheme: light)" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-light.png" media="(prefers-color-scheme: light)" />
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-light.png" media="(prefers-color-scheme: light)" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
    <title>å°ä¹ AI ç®¡å®¶ v0.8.0</title>
    <script>
        // è°ƒè¯•å·¥å…·: æŒ‰ Ctrl+Shift+D æ¸…é™¤è®¤è¯ä¿¡æ¯
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                console.log('ğŸ”§ æ¸…é™¤è®¤è¯ä¿¡æ¯...');
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                alert('å·²æ¸…é™¤tokenå’Œuserï¼Œå³å°†åˆ·æ–°é¡µé¢');
                location.reload();
            }
        });

        // å¯åŠ¨æ—¶æ£€æŸ¥tokenæœ‰æ•ˆæ€§
        (function () {
            const token = localStorage.getItem('token');
            if (token) {
                console.log('ğŸ” æ£€æµ‹åˆ°tokenï¼ŒéªŒè¯ä¸­...');
                fetch('/sessions', {
                    headers: { 'Authorization': 'Bearer ' + token }
                }).then(res => {
                    if (res.status === 401) {
                        console.warn('âš ï¸ Tokenæ— æ•ˆï¼Œæ¸…é™¤ä¸­...');
                        localStorage.removeItem('token');
                        localStorage.removeItem('user');
                        if (window.location.pathname !== '/login') {
                            window.location.href = '/login';
                        }
                    } else {
                        console.log('âœ… Tokenæœ‰æ•ˆ');
                    }
                }).catch(err => {
                    console.error('âŒ TokenéªŒè¯å¤±è´¥:', err);
                });
            } else {
                console.log('â„¹ï¸ æœªæ£€æµ‹åˆ°token');
            }
        })();
    </script>
</head>

<body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
</body>

</html>